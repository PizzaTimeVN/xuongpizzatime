<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n L√Ω X∆∞·ªüng Pizza</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .header h1 {
            color: #d63384;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        
        .date-display {
            color: #666;
            font-size: 1.1em;
        }
        
        .nav-tabs {
            display: flex;
            background: white;
            border-radius: 15px;
            padding: 10px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            gap: 10px;
        }
        
        .tab-btn {
            flex: 1;
            padding: 15px 20px;
            border: none;
            background: transparent;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            color: #666;
        }
        
        .tab-btn.active {
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3);
        }
        
        .content-panel {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .content-panel.active {
            display: block;
        }
        
        .form-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
            border-left: 5px solid #ff6b6b;
        }
        
        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .form-group {
            flex: 1;
            min-width: 200px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }
        
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #ff6b6b;
        }
        
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(45deg, #56ab2f, #a8e6cf);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(45deg, #f093fb, #f5576c);
            color: white;
        }
        
        .btn-info {
            background: linear-gradient(45deg, #4facfe, #00f2fe);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .data-table th {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        
        .data-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .data-table tr:hover {
            background-color: #f8f9fa;
        }
        
        .ingredient-row {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
            padding: 10px;
            background: white;
            border-radius: 8px;
        }
        
        .ingredient-row label {
            min-width: 150px;
            font-weight: 500;
        }
        
        .ingredient-row input {
            width: 100px;
            padding: 8px;
            border: 2px solid #e9ecef;
            border-radius: 6px;
        }
        
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .alert-warning {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }
        
        .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
        }
        
        .status-completed {
            background: #d1f2eb;
            color: #0c7b5c;
        }
        
        .status-pending {
            background: #fef9e7;
            color: #b7791f;
        }
        
        .status-low {
            background: #f8d7da;
            color: #721c24;
        }
        
        .status-normal {
            background: #d4edda;
            color: #155724;
        }

        .google-sheets-section {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 5px solid #28a745;
        }

        .sheets-setup {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #ffc107;
        }

        .export-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }

        .connection-status {
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
            margin-left: 10px;
        }

        .connected {
            background: #d4edda;
            color: #155724;
        }

        .disconnected {
            background: #f8d7da;
            color: #721c24;
        }
        
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .data-table {
                font-size: 0.9em;
            }
            
            .export-controls {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>


<body>
    <div id="loginScreen" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 9999; display: flex; align-items: center; justify-content: center; flex-direction: column;">
  <h2>üîí Vui l√≤ng ƒëƒÉng nh·∫≠p</h2>
  <input type="text" id="loginID" placeholder="Nh·∫≠p ID..." style="padding: 10px; margin-top: 10px;">
  <input type="password" id="loginPassword" placeholder="Nh·∫≠p m·∫≠t kh·∫©u..." style="padding: 10px; margin-top: 10px;">
  <button onclick="checkLogin()" style="margin-top: 10px;">ƒêƒÉng nh·∫≠p</button>
  <p id="loginError" style="color: red; margin-top: 10px;"></p>
</div>

    <div class="container">
        <div class="header">
            <h1>üçï Qu·∫£n L√Ω X∆∞·ªüng S·∫£n Xu·∫•t Pizza</h1>
            <div class="date-display" id="currentDate"></div>
        </div>
        
        <div class="nav-tabs">
            <button class="tab-btn active" onclick="showTab(event, 'overview')">S·∫£n Xu·∫•t</button>
            <button class="tab-btn" onclick="showTab(event, 'shipment')">Xu·∫•t H√†ng</button>
            <button class="tab-btn" onclick="showTab(event, 'order')">ƒê·∫∑t H√†ng Nguy√™n Li·ªáu</button>
            <button class="tab-btn" onclick="showTab(event, 'inventory')">T·ªìn Kho</button>
        </div>

        <!-- Tab S·∫£n Xu·∫•t -->
        <div id="overview" class="content-panel active">
            <h2>üè≠ Qu·∫£n L√Ω S·∫£n Xu·∫•t</h2>
            
            <div class="form-section">
                <h3>‚ûï Th√™m S·∫£n Ph·∫©m S·∫£n Xu·∫•t</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>Lo·∫°i:</label>
                        <select id="productType">
                            <option value="ƒê·∫ø L">ƒê·∫ø L</option>
  <option value="ƒê·∫ø S">ƒê·∫ø S</option>
  <option value="Ph√¥ Mai L">Ph√¥ Mai L</option>
  <option value="Ph√¥ Mai S">Ph√¥ Mai S</option>
  <option value="B√≤ pz">B√≤ pz</option>
  <option value="B√≤ m√¨ √ù">B√≤ m√¨ √ù</option>
  <option value="G√†">G√†</option>
  <option value="T√¥m">T√¥m</option>
  <option value="M·ª±c">M·ª±c</option>
  <option value="C√° Ng·ª´ (b·ªãch)">C√° Ng·ª´ (b·ªãch)</option>
  <option value="XXH (b·ªãch)">XXH (b·ªãch)</option>
  <option value="XXƒê (b·ªãch)">XXƒê (b·ªãch)</option>
  <option value="Ba R·ªçi (b·ªãch)">Ba R·ªçi (b·ªãch)</option>
  <option value="Ph√¥ mai t∆∞∆°i">Ph√¥ mai t∆∞∆°i</option>
  <option value="B√≤ s·ªët cay (b·ªãch)">B√≤ s·ªët cay (b·ªãch)</option>
  <option value="S·ªët s·ªØa (b·ªãch)">S·ªët s·ªØa (b·ªãch)</option>
  <option value="S·ªët c√† (h≈©)">S·ªët c√† (h≈©)</option>
  <option value="S·ªët G√†">S·ªët G√†</option>
  <option value="Salami (b·ªãch)">Salami (b·ªãch)</option>
  <option value="ƒê√πi G√†">ƒê√πi G√†</option>
  <option value="ƒê√° Me">ƒê√° Me</option>
  <option value="G√† L·∫Øc">G√† L·∫Øc</option>
  <option value="XX Chi√™n X√π">XX Chi√™n X√π</option>
  <option value="Tr√† ƒë√†o( m·ª©t)">Tr√† ƒë√†o( m·ª©t)</option>
  <option value="KTC">KTC</option>
  <option value="Tok">Tok</option>
  <option value="Tr√† ƒë√†o mi·∫øng">Tr√† ƒë√†o mi·∫øng</option>
  <option value="N·∫•m">N·∫•m</option>
  <option value="B√¥ng C·∫£i Xanh">B√¥ng C·∫£i Xanh</option>
  <option value="Bom Ph√¥ Mai">Bom Ph√¥ Mai</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>S·ªë L∆∞·ª£ng:</label>
                        <input type="number" id="pizzaQuantity" min="1" value="1">
                    </div>
                </div>
                <button class="btn btn-primary" onclick="addProduction()">Th√™m S·∫£n Xu·∫•t</button>
            </div>
            
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Th·ªùi Gian</th>
                        <th>Lo·∫°i Pizza</th>
                        <th>S·ªë L∆∞·ª£ng</th>
                        <th>Tr·∫°ng Th√°i</th>
                    </tr>
                </thead>
                <tbody id="productionTable">
                </tbody>
            </table>
        </div>
        
        <!-- Tab Xu·∫•t H√†ng -->
        <div id="shipment" class="content-panel">
            <h2>üöö Xu·∫•t H√†ng Cho Qu√°n</h2>
            
            <div class="form-section">
                <h3>üì§ T·∫°o ƒê∆°n Xu·∫•t H√†ng</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>Qu√°n:</label>
                        <select id="shopName">
                            <option value="DH">DH</option>
                            <option value="NH">NH</option>
                            <option value="HXH">HXH</option>
                            <option value="PY">PY</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Nguy√™n Li·ªáu & S·ªë L∆∞·ª£ng:</label>
                    <div id="ingredientList"></div>
                </div>

                <button class="btn btn-success" onclick="addShipment()">T·∫°o ƒê∆°n Xu·∫•t</button>
            </div>

            <table class="data-table">
                <thead>
                    <tr>
                        <th>Th·ªùi Gian</th>
                        <th>Qu√°n</th>
                        <th>Nguy√™n Li·ªáu</th>
                        <th>S·ªë L∆∞·ª£ng</th>
                        <th>Tr·∫°ng Th√°i</th>
                    </tr>
                </thead>
                <tbody id="shipmentTable">
                </tbody>
            </table>
        </div>

        <!-- Tab ƒê·∫∑t H√†ng -->
        <div id="order" class="content-panel">
            <h2>üì¶ ƒê·∫∑t H√†ng Nguy√™n Li·ªáu H√¥m Nay</h2>

           <div class="form-section">
  <h3>üõí ƒê·∫∑t H√†ng Nguy√™n Li·ªáu</h3>

  <div class="form-row">
    <div class="form-group">
      <label>T√™n H√†ng:</label>
      <select id="ingredient">
        <option value="">-- Ch·ªçn nguy√™n li·ªáu --</option>
        <option value="Ph√¥ mai cam">Ph√¥ mai cam</option>
        <option value="Ph√¥ mai Topping">Ph√¥ mai Topping</option>
        <option value="Ph√¥ Mai Emborg">Ph√¥ Mai Emborg</option>
        <option value="Ph√¥ mai v√†ng">Ph√¥ mai v√†ng</option>
        <option value="Ph√¥ mai t∆∞∆°i">Ph√¥ mai t∆∞∆°i</option>
        <option value="G√†">G√†</option>
        <option value="ƒê√πi G√†">ƒê√πi G√†</option>
        <option value="B·∫Øp (Kg)">B·∫Øp (Kg)</option>
        <option value="Khoai T√¢y Chi√™n">Khoai T√¢y Chi√™n</option>
        <option value="X√∫c X√≠ch heo">X√∫c X√≠ch heo</option>
        <option value="X√∫c X√≠ch ƒê·ª©c">X√∫c X√≠ch ƒê·ª©c</option>
        <option value="T√¥m">T√¥m</option>
        <option value="M·ª±c">M·ª±c</option>
        <option value="C√° Ng·ª´">C√° Ng·ª´</option>
        <option value="Coca chai">Coca chai</option>
        <option value="N∆∞·ªõc su·ªëi">N∆∞·ªõc su·ªëi</option>
        <option value="Coca lon">Coca lon</option>
        <option value="Bia Blance">Bia Blance</option>
        <option value="Bia Quy Nh∆°n">Bia Quy Nh∆°n</option>
        <option value="Bao Pizza L·ªõn">Bao Pizza L·ªõn</option>
        <option value="D·∫ßu ƒÉn">D·∫ßu ƒÉn</option>
        <option value="Thanh Cua">Thanh Cua</option>
        <option value="Ba R·ªçi">Ba R·ªçi</option>
        <option value="M√¨ √ù">M√¨ √ù</option>
      </select>
    </div>

    <div class="form-group">
      <label>S·ªë L∆∞·ª£ng:</label>
      <input type="number" id="ingredientQty" min="1" value="1" />
    </div>

    <div class="form-group">
      <label>Tr·∫°ng Th√°i:</label>
      <select id="orderUrgency">
        <option value="G·∫•p">G·∫•p</option>
        <option value="Thong th·∫£">Thong th·∫£</option>
      </select>
    </div>
  </div>

  <button class="btn btn-secondary" onclick="addOrder()">+ Th√™m v√†o ƒë∆°n</button>
  <button class="btn btn-warning" onclick="submitOrder()">üì¶ G·ª≠i ƒë∆°n h√†ng</button>
</div>

<table class="data-table">
  <thead>
    <tr>
      <th>T√™n H√†ng</th>
      <th>S·ªë L∆∞·ª£ng</th>
      <th>Tr·∫°ng Th√°i</th>
    </tr>
  </thead>
  <tbody id="orderTable"></tbody>
</table>

        <!-- Tab T·ªìn Kho -->
        <div id="inventory" class="content-panel">
            <h2>üìã T·ªìn Kho Nguy√™n Li·ªáu Hi·ªán T·∫°i</h2>
            
            <div class="alert alert-warning" id="lowStockAlert" style="display: none;">
                <strong>‚ö†Ô∏è C·∫£nh b√°o:</strong> M·ªôt s·ªë nguy√™n li·ªáu s·∫Øp h·∫øt h√†ng!
            </div>
            
            <div class="form-section">
                <h3>üìù C·∫≠p Nh·∫≠t T·ªìn Kho</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>Nh√≥m Nguy√™n Li·ªáu:</label>
                        <select id="groupSelect" onchange="renderGroupItems()">
                            <option value="">-- Ch·ªçn nh√≥m --</option>
                            <option value="Bao B√¨">Bao B√¨</option>
                            <option value="Gia V·ªã">Gia V·ªã</option>
                            <option value="N∆∞·ªõc">N∆∞·ªõc</option>
                            <option value="M√≥n ƒÉn nh·∫π">M√≥n ƒÉn nh·∫π</option>
                            <option value="ƒê·ªì ch·∫ø bi·∫øn">ƒê·ªì ch·∫ø bi·∫øn</option>
                            <option value="ƒê·ªì nguy√™n b·ªãch">ƒê·ªì nguy√™n b·ªãch</option>
                        </select>
                    </div>
                </div>

                <div id="ingredientListContainer"></div>
                <button class="btn btn-primary" onclick="updateGroupInventory()">C·∫≠p Nh·∫≠t</button>
            </div>
            
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Nguy√™n Li·ªáu</th>
                        <th>T·ªìn Kho</th>
                        <th>ƒê∆°n V·ªã</th>
                        <th>M·ª©c T·ªëi Thi·ªÉu</th>
                        <th>Tr·∫°ng Th√°i</th>
                    </tr>
                </thead>
                <tbody id="inventoryTableBody">
                </tbody>
            </table>
        </div>

      
    
    <script>
        // D·ªØ li·ªáu ·ª©ng d·ª•ng

        const USERS = [
  { id: "admin", password: "123456" },
  { id: "kho1", password: "kho123" },
  { id: "kho2", password: "pass456" }
];
        
        const ingredients = [
            "ƒê·∫ø L", "ƒê·∫ø S", "PML", "PMS", "B√≤ Pz", "B√≤ M√¨", "G√†", "T√¥m", "M·ª±c",
            "XXH", "XXƒê", "C√° Ng·ª´", "Ba R·ªçi", "B√≤ S·ªët Cay", "Thanh Cua", "SLM",
            "Ph√¥ Mai T∆∞∆°i", "B√¥ng C·∫£i Xanh", "N·∫•m", "Coca CHai", "Coca Lon",
            "N∆∞·ªõc Su·ªëi", "G√† L·∫Øc", "G√† R√°n", "XX Chi√™n x√π", "D·∫ßu ƒÉn"
        ];

        const inventory = {
    'Bao B√¨': {
    'Gi·∫•y ƒÉn': { quantity: 0, unit: 'cu·ªôn', min: 10 },
    'Ly Nh·ª±a': { quantity: 0, unit: 'l·ªëc', min: 5 },
    'Nƒ©a Nh·ª±a': { quantity: 300, unit: 'b·ªãch', min: 3 },
    'H·ªôp ƒëen m√¨ √Ω': { quantity: 150, unit: 'c√°i', min: 50 },
    'H·ªôp m√¨ √Ω ƒë√∫t l√≤': { quantity: 100, unit: 'c√°i', min: 50 },
    'Bao c√¢n b√≤': { quantity: 100, unit: 'kg', min: 0.2 },
    'Bao c√¢n m√¨ √Ω': { quantity: 100, unit: 'kg', min: 0.2 },
    'Bao Ly nh·ª±a': { quantity: 200, unit: 'kg', min: 1 },
    'Bao pizza': { quantity: 300, unit: 'kg', min: 1 },
    'Bao 1 m√≥n': { quantity: 300, unit: 'kg', min: 1 },
    'Bao r√°c': { quantity: 100, unit: 'kg', min: 1 },
    'Bao Tay cao su': { quantity: 50, unit: 'h·ªôp', min: 2 },
    'B√¨ v√†ng': { quantity: 100, unit: 'kg', min: 0.5 },
    'Gi·∫•y n√™n l√≥t h·ªôp': { quantity: 200, unit: 't·ªù', min: 100 },
    'Bao gi·∫•y tr·∫Øng': { quantity: 200, unit: 't·ªù', min: 100 },
    'Bao ƒë·∫ø nh·ªè': { quantity: 200, unit: 'kg', min: 0.5 },
    'Bao ƒë·∫ø l·ªõn': { quantity: 200, unit: 'kg', min: 0.5 },
    'Cu·ªôn in Bill': { quantity: 30, unit: 'cu·ªôn', min: 5 },
    'v√≤ng Pizza time': { quantity: 200, unit: 'c√°i', min: 100 },
    '·ªêng H√∫t': { quantity: 300, unit: 'c√°i', min: 100 }
  },
  'Gia V·ªã': {
    'Tr·ª©ng': { quantity: 100, unit: 'qu·∫£', min: 5 },
    'ƒê∆∞·ªùng': { quantity: 10, unit: 'kg', min: 2 },
    'Mu·ªëi': { quantity: 5, unit: 'kg', min: 2 },
    'R∆∞·ª£u': { quantity: 3, unit: 'chai', min: 1 },
    'X√¨ d·∫ßu': { quantity: 5, unit: 'chai', min: 2 },
    'S·ªët D·∫ßu Gi·∫•m': { quantity: 2, unit: 'chai', min: 1 },
    'Ti√™u': { quantity: 1, unit: 'kg', min: 0.5 },
    'Men': { quantity: 0.5, unit: 'kg', min: 0.2 },
    'B·ªôt G√†': { quantity: 2, unit: 'kg', min: 1 },
    'N∆∞·ªõc r·ª≠a ch√©n': { quantity: 3, unit: 'can', min: 1 },
    'S·ªët G√† Cay': { quantity: 2, unit: 'can', min: 0.3 },
    'S·ªët ∆Ø·ªõp Th·ªãt': { quantity: 3, unit: 'b·ªãch', min: 1 },
    'Mayonaise Xanh': { quantity: 4, unit: 'chai', min: 2 },
    'D·∫ßu ƒÇn': { quantity: 10, unit: 'can', min: 0.5 },
    'B∆°': { quantity: 5, unit: 'h≈©', min: 2 },
    'c√† chua paste s·ªát': { quantity: 4, unit: 'h≈©', min: 2 },
    'PM l·∫Øc g√†': { quantity: 2, unit: 'b·ªãch', min: 1 }
  },
  'N∆∞·ªõc': {
    'ƒê√° me': { quantity: 5, unit: 'l√≠t', min: 2 },
    'Coca chai': { quantity: 50, unit: 'chai', min: 6 },
    'N∆∞·ªõc su·ªëi': { quantity: 100, unit: 'chai', min: 10 },
    'CoCa lon': { quantity: 60, unit: 'lon', min: 10 },
    '7 up': { quantity: 40, unit: 'chai', min: 20 },
    'Bia Blance': { quantity: 30, unit: 'chai', min: 10 },
    'Bia Quy Nh∆°n': { quantity: 30, unit: 'chai', min: 10 },
    'Tr√† s·ªØa': { quantity: 10, unit: 'l√≠t', min: 5 },
    'Tr√¢n ch√¢u': { quantity: 2, unit: 'kg', min: 1 },
    'Tr√† ƒë√†o': { quantity: 5, unit: 'h·ªôp', min: 1 },
    'Mi·∫øng ƒê√†o': { quantity: 2, unit: 'b·ªãch', min: 10 },
    'M·ª©t ƒê√†o': { quantity: 1, unit: 'chai', min: 0.5 },
    'N∆∞·ªõc ƒê∆∞·ªùng': { quantity: 5, unit: 'l√≠t', min: 2 }
  },
  'M√≥n ƒÉn nh·∫π': {
    'B√°nh m√¨': { quantity: 30, unit: '·ªï', min: 15 },
    'B√≤ M√¨ √ù': { quantity: 10, unit: 'b·ªãch', min: 20 },
    'G√† L·∫Øc': { quantity: 10, unit: 'b·ªãch', min: 20 },
    'G√† R√°n': { quantity: 10, unit: 'ƒë√πi', min: 10 },
    'KTC': { quantity: 5, unit: 'b·ªãch', min: 20 },
    'Bom Ph√¥ Mai': { quantity: 3, unit: 'bom', min: 10 },
    'XX Chi√™n x√π': { quantity: 5, unit: 'c√¢y', min: 10 },
    'S·ªët s·ªØa': { quantity: 2, unit: 'b·ªãch', min: 10 },
    'Tokbokki (B·ªãch)': { quantity: 5, unit: 'b·ªãch', min: 10 }
  },
  'ƒê·ªì ch·∫ø bi·∫øn': {
    'Ba R·ªçi (b·ªãch)': { quantity: 10, unit: 'b·ªãch', min: 20 },
    'B√≤ Pizza': { quantity: 8, unit: 'b·ªãch', min: 20 },
    'B√≤ S·ªët Cay (b·ªãch)': { quantity: 6, unit: 'b·ªãch', min: 10 },
    'C√° ng·ª´ (b·ªãch)': { quantity: 6, unit: 'b·ªãch', min: 20 },
    'ƒê·∫ø L': { quantity: 40, unit: 'c√°i', min: 20 },
    'ƒê·∫ø S': { quantity: 60, unit: 'c√°i', min: 30 },
    'G√† Pizza': { quantity: 8, unit: 'b·ªãch', min: 20 },
    'M·ª±c': { quantity: 5, unit: 'g', min: 100 },
    'Ph√¥ Mai L (b·ªãch)': { quantity: 10, unit: 'b·ªãch', min: 50 },
    'Ph√¥ Mai S (b·ªãch)': { quantity: 12, unit: 'b·ªãch', min: 30 },
    'S·ªët c√†': { quantity: 20, unit: 'h≈©', min: 2 },
    'T√¥m': { quantity: 4, unit: 'g', min: 200 },
    'XXƒê (b·ªãch)': { quantity: 6, unit: 'b·ªãch', min: 20 },
    'XXH (b·ªãch)': { quantity: 6, unit: 'b·ªãch', min: 20 },
    'Kh√¥ G√† (b·ªãch)': { quantity: 3, unit: 'b·ªãch', min: 10 },
    'L·∫°p X∆∞·ªüng (b·ªãch)': { quantity: 5, unit: 'b·ªãch', min: 10 },
    'N·∫•m (b·ªãch)': { quantity: 4, unit: 'b·ªãch', min: 10 },
    'B√¥ng c·∫£i Xanh (B·ªãch)': { quantity: 4, unit: 'b·ªãch', min: 10 }
  },

  'ƒê·ªì nguy√™n b·ªãch': {
    'Ba R·ªçi (nguy√™n)': { quantity: 3, unit: 'kg', min: 1 },
    'B·∫Øp (nguy√™n)': { quantity: 3, unit: 'kg', min: 6 },
    'C√° ng·ª´': { quantity: 2, unit: 'h≈©', min: 1 },
    'G√† (nguy√™n)': { quantity: 4, unit: 'kg', min: 2 },
    'Khoai T√¢y Chi√™n': { quantity: 5, unit: 'kg', min: 2.5 },
    'Mayonaise': { quantity: 3, unit: 'h≈©', min: 1 },
    'M√¨ √Ω ch lu·ªôc': { quantity: 5, unit: 'b·ªãch', min: 10 },
    'Ph√¥ Mai Cam': { quantity: 3, unit: 'c√¢y', min: 3 },
    'Ph√¥ Mai Topping': { quantity: 3, unit: 'c√¢y', min: 5 },
    'Ph√¥ Mai Emborg': { quantity: 2, unit: 'c√¢y', min: 5 },
    'Ph√¥ Mai T∆∞∆°i': { quantity: 2, unit: 'vi√™n', min: 50 },
    'Ph√¥ Mai V√†ng': { quantity: 3, unit: 'c√¢y', min: 20 },
    'Thanh Cua': { quantity: 2, unit: 'h·ªôp', min: 2 },
    'Salami': { quantity: 2, unit: 'b·ªãch', min: 1 },
    'XXƒê (nguy√™n)': { quantity: 3, unit: 'kg', min: 1 },
    'XXH (nguy√™n)': { quantity: 3, unit: 'kg', min: 1 },
    'T∆∞∆°ng': { quantity: 2, unit: 'l√≠t', min: 1 },
    'T∆∞∆°ng ·ªõt chai (th√πng)': { quantity: 1, unit: 'th√πng', min: 1 },
    'T∆∞∆°ng c√† chai (th√πng)': { quantity: 1, unit: 'th√πng', min: 1 },
    'T∆∞∆°ng ·ªõt b·ªãch (th√πng)': { quantity: 1, unit: 'th√πng', min: 1 },
    'T∆∞∆°ng c√† b·ªãch (th√πng)': { quantity: 1, unit: 'th√πng', min: 1 }
  }
};

 const webhookURL = "https://discord.com/api/webhooks/1382789073793712248/aoGn859F1nrWGNSziO1MQEfO7xPs_uTjVtttxEqH2eu_fTIIO34VPyhTuCUnOr2x_KBg";


let orderData = [];
let orderList = [];
let shipmentData = [];
let inventoryData = [];



        // Hi·ªÉn th·ªã ng√†y hi·ªán t·∫°i
        function updateCurrentDate() {
            const now = new Date();
            const options = {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            };
            document.getElementById('currentDate').textContent = now.toLocaleDateString('vi-VN', options);
        }
        


        // Chuy·ªÉn tab
        function showTab(event, tabName) {
            document.querySelectorAll('.content-panel').forEach(panel => panel.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            
            const activePanel = document.getElementById(tabName);
            if (activePanel) {
                activePanel.classList.add('active');
            }
            
            event.currentTarget.classList.add('active');
            
            if (tabName === 'overview') {
                updateProductionTable();
            } else if (tabName === 'shipment') {
                initIngredientList();
                updateShipmentTable();
            } else if (tabName === 'order') {
                updateOrderTable();
            } else if (tabName === 'inventory') {
                updateInventoryTable();
            }
        }

const scriptURL = 'https://script.google.com/macros/s/AKfycbxjKyz3Ektiui9dxUTS4NYXyLTHLr0w7dhlkbDmqGOQ7OeubIBD7QH3MYol5CYYBFqqnA/exec'; // <-- Thay b·∫±ng link th·∫≠t

function sendToSheet(sheetName, data) {
    const payload = { sheetName, ...data };

    return fetch(scriptURL, {
        method: 'POST',
        body: JSON.stringify(payload),
    });
}

        // Kh·ªüi t·∫°o danh s√°ch nguy√™n li·ªáu cho xu·∫•t h√†ng
        function initIngredientList() {
            const container = document.getElementById("ingredientList");
            container.innerHTML = "";
            
            ingredients.forEach(name => {
                const div = document.createElement("div");
                div.classList.add("ingredient-row");
                div.innerHTML = `
                    <label>${name}:</label>
                    <input type="number" min="0" value="0" data-name="${name}">
                `;
                container.appendChild(div);
            });
        }

        // Th√™m s·∫£n xu·∫•t
        function addProduction() {
    const productType = document.getElementById('productType').value;
    const quantity = parseInt(document.getElementById('pizzaQuantity').value);
    const now = new Date();

    sendToSheet("Lam", {
        productType,
        quantity,
        time: now.toLocaleString('vi-VN')
    })
    .then(() => {
        alert("‚úîÔ∏è ƒê√£ th√™m s·∫£n xu·∫•t th√†nh c√¥ng!");
        document.getElementById('pizzaQuantity').value = 1;
    })
    .catch(error => {
        console.error('‚ùå L·ªói:', error);
        alert("G·ª≠i th·∫•t b·∫°i, th·ª≠ l·∫°i.");
    });
}
  
            
         function addShipment() {
    const shop = document.getElementById("shopName").value;
    const inputs = document.querySelectorAll('#ingredientList input');
    const now = new Date();

    const dataList = [];

     inputs.forEach(input => {
        const qty = parseInt(input.value);
        if (qty > 0) {
            dataList.push({
                time: now.toLocaleString('vi-VN'),
                shop: shop,
                ingredient: input.dataset.name,
                quantity: qty,
                status: 'ƒê√£ giao'
            });
        }
    });

    if (dataList.length === 0) {
        alert("‚ö†Ô∏è Kh√¥ng c√≥ nguy√™n li·ªáu n√†o ƒë·ªÉ xu·∫•t!");
        return;
    }

    sendToSheet("Xuat", { data: dataList })
        .then(() => {
            alert("‚úÖ ƒê√£ t·∫°o ƒë∆°n xu·∫•t h√†ng cho qu√°n " + shop);
            inputs.forEach(input => input.value = 0);
            shipmentData = [...dataList, ...shipmentData];
            updateShipmentTable();
        })
        .catch(error => {
            console.error('‚ùå L·ªói:', error);
            alert("G·ª≠i th·∫•t b·∫°i, th·ª≠ l·∫°i.");
        });
}


        // Th√™m xu·∫•t h√†ng
      function submitBulkShipment() {
    const shop = document.getElementById("shopName").value;
    const inputs = document.querySelectorAll('#ingredientList input');
    const now = new Date();
    const shipments = [];

    inputs.forEach(input => {
        const qty = parseInt(input.value);
        if (qty > 0) {
            shipments.push({
                time: now.toLocaleString('vi-VN'),
                shop: shop,
                ingredient: input.dataset.name,
                quantity: qty,
                status: 'ƒê√£ giao'
            });

            // Clear input sau khi g·ª≠i
            input.value = 0;
        }
    });

    if (shipments.length === 0) {
        alert("‚ö†Ô∏è B·∫°n ch∆∞a nh·∫≠p s·ªë l∆∞·ª£ng n√†o.");
        return;
    }

    // G·ª≠i t·∫•t c·∫£ l√™n Google Sheets trong m·ªôt l·∫ßn
    sendToSheet("Xuat", { data: shipments })
        .then(() => {
            alert("‚úÖ ƒê√£ t·∫°o ƒë∆°n xu·∫•t h√†ng cho qu√°n " + shop);
            shipmentData = shipments.concat(shipmentData); // C·∫≠p nh·∫≠t d·ªØ li·ªáu local n·∫øu c√≥
            updateShipmentTable();
        })
        .catch(error => {
            console.error("‚ùå G·ª≠i th·∫•t b·∫°i:", error);
            alert("C√≥ l·ªói x·∫£y ra khi g·ª≠i d·ªØ li·ªáu.");
        });
}

 
    function addOrder() {
      const ingredient = document.getElementById("ingredient").value;
      const urgency = document.getElementById("orderUrgency").value;

      if (!ingredient) {
        alert("Vui l√≤ng ch·ªçn nguy√™n li·ªáu");
        return;
      }

      orderList.push({ ingredient, urgency });
      updateTable();
    }

    function updateTable() {
      const tbody = document.getElementById("orderTable");
      tbody.innerHTML = "";

      orderList.forEach((order, index) => {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${order.ingredient}</td>
          <td>${order.urgency}</td>
          <td><button onclick="removeOrder(${index})">‚ùå</button></td>
        `;
        tbody.appendChild(row);
      });
    }

    function removeOrder(index) {
      orderList.splice(index, 1);
      updateTable();
    }

   function submitOrder() {
  if (orderList.length === 0) {
    alert("Ch∆∞a c√≥ m√≥n n√†o trong danh s√°ch ƒë·∫∑t h√†ng.");
    return;
  }

  const now = new Date().toLocaleString("vi-VN");
  let message = `üì¶ **ƒê∆°n ƒë·∫∑t h√†ng l√∫c ${now}**\n`;

  orderList.forEach((item, index) => {
    message += `\n${index + 1}. ${item.ingredient} - ${item.urgency}`;
  });

  fetch(webhookURL, {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify({ content: message })
  })
    .then(() => {
      alert("‚úÖ ƒê√£ g·ª≠i ƒë∆°n h√†ng th√†nh c√¥ng!");
      orderList = []; // clear danh s√°ch
      updateOrderTable(); // c·∫≠p nh·∫≠t b·∫£ng hi·ªÉn th·ªã
    })
    .catch((error) => {
      alert("‚ùå L·ªói khi g·ª≠i ƒë∆°n h√†ng: " + error.message);
    });
}


    // T·∫°o n·ªôi dung g·ª≠i ƒëi
    let content = "üì¶ **ƒê∆°n ƒë·∫∑t h√†ng m·ªõi:**\n";
    orderData.forEach((item, index) => {
        content += `\n${index + 1}. ${item.ingredient} - ${item.urgency}`;
    });

    // G·ª≠i t·ªõi Apps Script trung gian
    fetch("https://discord.com/api/webhooks/1382789073793712248/aoGn859F1nrWGNSziO1MQEfO7xPs_uTjVtttxEqH2eu_fTIIO34VPyhTuCUnOr2x_KBg", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
        },
        body: JSON.stringify({
            message: content
        })
    }).then(() => {
        alert("ƒê√£ g·ª≠i ƒë∆°n h√†ng th√†nh c√¥ng!");
        orderData = [];
        updateOrderTable();
    }).catch((error) => {
        alert("L·ªói khi g·ª≠i ƒë∆°n h√†ng: " + error);
    });


    function submitOrders() {
      if (orderList.length === 0) {
        alert("Ch∆∞a c√≥ m√≥n n√†o ƒë·ªÉ g·ª≠i");
        return;
      }

      const now = new Date().toLocaleString("vi-VN");
      let message = `üì¶ **ƒê∆°n ƒë·∫∑t h√†ng l√∫c ${now}**\n`;

      orderList.forEach((o, i) => {
        message += `\n${i + 1}. ${o.ingredient} (${o.urgency})`;
      });

      fetch(webhookURL, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ content: message })
      })
      .then(() => {
        alert("‚úÖ ƒê√£ g·ª≠i ƒë∆°n h√†ng th√†nh c√¥ng!");
        orderList.length = 0;
        updateTable();
      })
      .catch((err) => {
        console.error(err);
        alert("‚ùå L·ªói g·ª≠i Discord: " + err.message);
      });
    }
        // C·∫≠p nh·∫≠t b·∫£ng s·∫£n xu·∫•t
        function updateProductionTable() {
            const tbody = document.getElementById('productionTable');
            tbody.innerHTML = '';
            
            productionData.forEach(item => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${item.time}</td>
                    <td>${item.type}</td>
                    <td>${item.quantity}</td>
                    <td><span class="status-badge status-completed">${item.status}</span></td>
                `;
            });
        }

        // C·∫≠p nh·∫≠t b·∫£ng xu·∫•t h√†ng
        function updateShipmentTable() {
            const tbody = document.getElementById('shipmentTable');
            tbody.innerHTML = '';
            
            shipmentData.forEach(item => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${item.time}</td>
                    <td>${item.shop}</td>
                    <td>${item.ingredient}</td>
                    <td>${item.quantity}</td>
                    <td><span class="status-badge status-completed">${item.status}</span></td>
                `;
            });
        }

       

        // Qu·∫£n l√Ω t·ªìn kho
        function renderGroupItems() {
            const group = document.getElementById("groupSelect").value;
            const container = document.getElementById("ingredientListContainer");
            container.innerHTML = "";

            if (!group || !inventory[group]) return;

            const ingredients = inventory[group];
            const form = document.createElement("div");

            for (let item in ingredients) {
                const ing = ingredients[item];
                const color = ing.quantity < ing.min ? 'style="color:red;"' : "";

                const row = document.createElement("div");
                row.classList.add("form-row");

                row.innerHTML = `
                    <div class="form-group">
                        <label ${color}><strong>${item}</strong> (${ing.unit}) ‚Äî T·ªëi thi·ªÉu: ${ing.min}</label>
                        <input 
                            type="number" 
                            id="input-${group}-${item}" 
                            value="${ing.quantity}" 
                            min="0" 
                            onchange="checkBelowMin('${group}', '${item}')"
                        >
                    </div>
                `;

                form.appendChild(row);
            }

            container.appendChild(form);
        }

        function checkBelowMin(group, item) {
            const input = document.getElementById(`input-${group}-${item}`);
            const qty = parseInt(input.value);
            const min = inventory[group][item].min;

            input.previousElementSibling.style.color = qty < min ? "red" : "black";
        }


        function updateGroupInventory() {
    const group = document.getElementById("groupSelect").value;
    if (!group || !inventory[group]) {
        alert("‚ö†Ô∏è Vui l√≤ng ch·ªçn nh√≥m nguy√™n li·ªáu!");
        return;
    }

    const ingredients = inventory[group];
    const now = new Date();
    const payloadData = [];

    for (let item in ingredients) {
        const input = document.getElementById(`input-${group}-${item}`);
        if (input) {
            const newQty = parseInt(input.value);
            if (!isNaN(newQty)) {
                ingredients[item].quantity = newQty;

                payloadData.push({
                    group: group,
                    item: item,
                    quantity: newQty,
                    time: now.toLocaleString('vi-VN')
                });
            }
        }
    }

    // ‚úÖ G·ª≠i 1 l·∫ßn t·∫•t c·∫£ d√≤ng d·ªØ li·ªáu t·ªìn kho
    sendToSheet("Ton Kho", {
        data: payloadData
    }).then(() => {
        alert(`‚úÖ ƒê√£ c·∫≠p nh·∫≠t ${payloadData.length} d√≤ng t·ªìn kho cho nh√≥m "${group}"!`);
        renderGroupItems();
        updateInventoryTable();
    }).catch(err => {
        console.error("‚ùå L·ªói g·ª≠i t·ªìn kho:", err);
        alert("G·ª≠i t·ªìn kho th·∫•t b·∫°i!");
    });
}

           
    
            function updateInventoryTable() {
  const tbody = document.getElementById("inventoryTableBody");
  tbody.innerHTML = "";

  let hasLowStock = false; // ‚úÖ Khai b√°o ·ªü ƒë√¢y

  for (let category in inventory) {
    for (let name in inventory[category]) {
      const item = inventory[category][name];
      const isLow = item.quantity < item.min;

      if (isLow) hasLowStock = true;

      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${category}</td>
        <td>${name}</td>
        <td>${item.quantity} ${item.unit}</td>
        <td>${item.min} ${item.unit}</td>
        <td style="color: ${isLow ? 'red' : 'green'}">${isLow ? '‚ö†Ô∏è Thi·∫øu' : '‚úîÔ∏è ƒê·ªß'}</td>
      `;
      tbody.appendChild(row);
    }
  }
            }

function saveProduction(sheet, data) {
  sheet.appendRow([
    new Date(),
    data.productType || "",
    data.quantity || 0
  ]);
}

function saveShipment(sheet, data) {
  sheet.appendRow([
    new Date(),
    data.time || "",
    data.shop || "",
    data.ingredient || "",
    data.quantity || 0,
    data.status || ""
  ]);
}

function saveInventory(sheet, data) {
  sheet.appendRow([
    new Date(),
    data.time || "",
    data.group || "",
    data.item || "",
    data.quantity || 0
  ]);
}

function updateOrderTable() {
  const tbody = document.getElementById("orderTable");
  tbody.innerHTML = "";

  orderList.forEach((order, index) => {
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${order.ingredient}</td>
      <td>${order.urgency}</td>
      <td><button onclick="removeOrder(${index})">‚ùå</button></td>
    `;
    tbody.appendChild(row);
  });
}

          // Hi·ªÉn th·ªã c·∫£nh b√°o n·∫øu c√≥ nguy√™n li·ªáu s·∫Øp h·∫øt
            // ‚úÖ ƒê√£ s·ª≠a ƒë√∫ng bi·∫øn
const lowStockAlert = document.getElementById('lowStockAlert');
if (hasLowStock) {
    lowStockAlert.style.display = 'block';
} else {
    lowStockAlert.style.display = 'none';
}

        

        // Kh·ªüi t·∫°o ·ª©ng d·ª•ng
        document.addEventListener('DOMContentLoaded', function() {
            updateCurrentDate();
            initIngredientList();
            updateProductionTable();
            updateShipmentTable();
            updateOrderTable();
            updateInventoryTable();
        });

        // Danh s√°ch t√†i kho·∫£n cho ph√©p ƒëƒÉng nh·∫≠p (c√≥ th·ªÉ th√™m nhi·ªÅu)

function checkLogin() {
  const inputID = document.getElementById("loginID").value.trim();
  const inputPass = document.getElementById("loginPassword").value.trim();
  const errorMsg = document.getElementById("loginError");

  const foundUser = USERS.find(user => user.id === inputID && user.password === inputPass);

  if (foundUser) {
    document.getElementById("loginScreen").style.display = "none"; // ·∫®n m√†n h√¨nh login
  } else {
    errorMsg.textContent = "‚ùå Sai ID ho·∫∑c m·∫≠t kh·∫©u, vui l√≤ng th·ª≠ l·∫°i.";
  }
}

    </script>
</body>
</html>
